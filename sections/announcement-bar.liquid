{%- for block in section.blocks -%}
  <div class="announcement-bar" role="region" aria-label="{{ 'sections.header.announcement' | t }}" {{ block.shopify_attributes }}>
    {%- if block.settings.text != blank -%}
      {%- if block.settings.link != blank -%}
        <a href="{{ block.settings.link }}" class="announcement-bar__link focus-inset">
      {%- endif -%}

      <p class="announcement-bar__message h5">
        {{ block.settings.text | escape }}
        {%- if block.settings.link != blank -%}
          {% render 'icon-arrow' %}
        {%- endif -%}
      </p>

      {%- if block.settings.link != blank -%}
        </a>
      {%- endif -%}
    {%- endif -%}
  </div>
{%- endfor -%}

{% schema %}
{
  "name": "Announcement bar",
  "blocks": [
    {
      "type": "announcement",
      "name": "Announcement",
      "settings": [
        {
          "type": "text",
          "id": "text",
          "label": "Text",
          "default": "Welcome to our store"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    }
  ],
  "default": {
    "blocks": [
      {
        "type": "announcement"
      }
    ]
  }
}
{% endschema %}
